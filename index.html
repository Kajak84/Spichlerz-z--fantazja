<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spichlerz z Fantazją - Dywan Liści</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#e4d09b; overflow-x:hidden; }
header { background:#000; color:#fff; padding:20px; text-align:center; }
.hero-image img { width:100%; height:400px; object-fit:cover; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.3); }
.hero { display:flex; justify-content:center; flex-wrap:wrap; gap:20px; padding:20px; }
.hero a img { width:300px; border-radius:10px; transition: transform 0.5s, filter 0.5s; }
.hero a img:hover { transform: scale(1.05) rotateY(3deg); filter: brightness(1.1); }
.section { padding:40px; text-align:center; opacity:0; transform: translateY(30px); transition: all 1s ease; }
.section.visible { opacity:1; transform:translateY(0); }

.leaves-area { position:fixed; inset:0; pointer-events:none; z-index:999; }
.leaf { position:absolute; top:-10vh; will-change: transform, opacity; opacity:0.9; }

@keyframes fall {
  0% { transform: translateY(-10vh) rotate(var(--start-rot)); opacity:0.7; }
  30% { transform: translateY(30vh) rotate(calc(var(--start-rot) + var(--spin-deg)/3)); opacity:0.75; }
  60% { transform: translateY(60vh) rotate(calc(var(--start-rot) + var(--spin-deg)/2)); opacity:0.8; }
  100% { transform: translateY(calc(100vh - var(--bottom))) rotate(calc(var(--start-rot) + var(--spin-deg))); opacity:0.85; }
}

@keyframes sway {
  0% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(var(--sway-offset)) rotate(8deg); }
  50% { transform: translateX(0) rotate(-8deg); }
  75% { transform: translateX(calc(-1 * var(--sway-offset))) rotate(4deg); }
  100% { transform: translateX(0) rotate(0deg); }
}
</style>
</head>
<body>

<header>
  <h1>Spichlerz z Fantazją</h1>
  <p>Tradycja, smak i atmosfera w samym sercu Braniewa</p>
</header>

<div class="leaves-area" aria-hidden="true"></div>
<template id="leaf-template"><div class="leaf"></div></template>

<script>
const area = document.querySelector('.leaves-area');
const tpl = document.getElementById('leaf-template');

const config = {
  colors: ['#b24b2f','#d97a3a','#f2c96d','#7a3f2a','#9c5b3a'],
  svgs: [
    '<svg viewBox="0 0 64 64"><path d="M32 2l6 12 12-6-6 12 12 6-12 6 6 12-12-6-6 12-6-12-12 6 6-12-12-6 12-6-6-12 12 6z" fill="currentColor"/></svg>',
    '<svg viewBox="0 0 64 64"><path d="M32 4c-6 4-12 8-14 14s0 14 6 20c6 6 14 10 20 6s8-14 6-20-8-10-18-20z" fill="currentColor"/></svg>',
    '<svg viewBox="0 0 64 64"><path d="M22 6c10 0 20 8 22 16s-2 20-12 24-22 0-26-12S12 6 22 6z" fill="currentColor"/></svg>',
    '<svg viewBox="0 0 64 64"><path d="M18 4c12 4 24 12 26 22s-6 20-16 22-20-4-22-14S6 0 18 4z" fill="currentColor"/></svg>'
  ],
  layers: [
    {minSize:20,maxSize:35,minDuration:20,maxDuration:35,maxSway:30,bottom:20,zIndex:1},
    {minSize:30,maxSize:50,minDuration:25,maxDuration:40,maxSway:50,bottom:40,zIndex:2},
    {minSize:40,maxSize:70,minDuration:30,maxDuration:50,maxSway:70,bottom:60,zIndex:3}
  ]
};

function rand(min,max){ return Math.random()*(max-min)+min }

function createLeaf(){
  const layer = config.layers[Math.floor(Math.random()*config.layers.length)];
  const node = tpl.content.firstElementChild.cloneNode(true);

  const size = Math.round(rand(layer.minSize, layer.maxSize));
  const left = Math.round(rand(0,100));
  const duration = rand(layer.minDuration, layer.maxDuration);
  const swayDuration = rand(6,12);
  const swayOffset = Math.round(rand(10, layer.maxSway));
  const startRot = Math.round(rand(-30,30)) + 'deg';
  const spinDeg = Math.round(rand(90,360)) + 'deg';
  const color = config.colors[Math.floor(rand(0, config.colors.length))];
  const svg = config.svgs[Math.floor(Math.random()*config.svgs.length)];

  node.style.left = left + '%';
  node.style.width = size + 'px';
  node.style.color = color;
  node.style.zIndex = layer.zIndex;
  node.style.setProperty('--start-rot', startRot);
  node.style.setProperty('--spin-deg', spinDeg);
  node.style.setProperty('--sway-offset', swayOffset+'px');
  node.style.setProperty('--bottom', layer.bottom+'px');
  node.style.animation = `fall ${duration}s linear forwards`;

  const swayWrap = document.createElement('div');
  swayWrap.style.width = '100%';
  swayWrap.style.height = '100%';
  swayWrap.style.display = 'block';
  swayWrap.style.animation = `sway ${swayDuration}s ease-in-out infinite`;
  swayWrap.innerHTML = svg;
  node.appendChild(swayWrap);

  area.appendChild(node);

  // Po zakończeniu animacji liść pozostaje na dole
  setTimeout(()=> {
    node.style.top = 'auto';
    node.style.bottom = layer.bottom+'px';
    node.style.animation = 'none';
  }, duration*1000);
}

setInterval(createLeaf, 600);
</script>

</body>
</html>
